# Device Capture Workflows

Cerebrus coordinates Android device profiling through Unreal Engine tools and ADB.

## Device Discovery

- Cerebrus queries connected devices using ADB (and potentially UAFT).
- Device list shows:
  - Serial
  - Make / model
  - Android version
  - Connection type (USB, Wi-Fi)

Devices can be:

- Selected individually.
- Multi-selected to trigger batch captures.

## Capture Types

Typical capture types:

- **Logcat capture**:
  - Captures system logs for troubleshooting.
- **CSV profiling capture**:
  - Captures perf CSVs generated by the Unreal Engine profiling systems.
- **Insights or PRC captures** (depending on your setup):
  - Captures deeper timing and event stream data.

Capture definitions are controlled through **profiles** (see `docs/config/PROFILE_DEFINITIONS.md`).

## Capture Workflow (High-Level)

1. Select one or more devices in the Devices panel.
2. Choose a project profile (e.g. `Android_Default`, `Android_RegressionSuite`).
3. Select capture type:
   - Logcat only
   - CSV only
   - CSV + PerfReport
   - Custom combinations based on project config.
4. Start capture:
   - Cerebrus will:
     - Invoke the appropriate scripts or UAFT workflows.
     - Copy profiling output to the configured project directory.
     - Apply any naming convention defined in the profile (e.g. build number, timestamp, device name).

## Storage Layout

Typical project capture layout:

```text
<ProjectRoot>/
  captures/
    <device>/<run-id>/
      raw/
        *.csv
        *.prc
        logcat_*.txt
      processed/
        collated/
        reports/
        svg/
```

The exact layout is configurable but should be stable per project to keep reporting scripts reliable.

## Error Handling

Cerebrus must:

- Surface clear errors when:
  - Devices disconnect during capture.
  - CSVs are missing or corrupted.
  - Expected metadata is not present.
- Offer guidance to:
  - Re-run the capture.
  - Check device build or configuration.
  - Validate tool paths and permissions.

Use this document as a conceptual guide; refer to the UI itself for the exact labels and steps when implemented.
